"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[916],{96916:function(e,t,n){n.d(t,{wF:function(){return ed}}),(u=d||(d={}))[u.QR_CODE=0]="QR_CODE",u[u.AZTEC=1]="AZTEC",u[u.CODABAR=2]="CODABAR",u[u.CODE_39=3]="CODE_39",u[u.CODE_93=4]="CODE_93",u[u.CODE_128=5]="CODE_128",u[u.DATA_MATRIX=6]="DATA_MATRIX",u[u.MAXICODE=7]="MAXICODE",u[u.ITF=8]="ITF",u[u.EAN_13=9]="EAN_13",u[u.EAN_8=10]="EAN_8",u[u.PDF_417=11]="PDF_417",u[u.RSS_14=12]="RSS_14",u[u.RSS_EXPANDED=13]="RSS_EXPANDED",u[u.UPC_A=14]="UPC_A",u[u.UPC_E=15]="UPC_E",u[u.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION";var r,o,a,i,s,c,l,u,d,h,p,f,m,g,S=new Map([[d.QR_CODE,"QR_CODE"],[d.AZTEC,"AZTEC"],[d.CODABAR,"CODABAR"],[d.CODE_39,"CODE_39"],[d.CODE_93,"CODE_93"],[d.CODE_128,"CODE_128"],[d.DATA_MATRIX,"DATA_MATRIX"],[d.MAXICODE,"MAXICODE"],[d.ITF,"ITF"],[d.EAN_13,"EAN_13"],[d.EAN_8,"EAN_8"],[d.PDF_417,"PDF_417"],[d.RSS_14,"RSS_14"],[d.RSS_EXPANDED,"RSS_EXPANDED"],[d.UPC_A,"UPC_A"],[d.UPC_E,"UPC_E"],[d.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);(r=h||(h={}))[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL",(o=p||(p={}))[o.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",o[o.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE";var y=function(){function Html5QrcodeConstants(){}return Html5QrcodeConstants.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",Html5QrcodeConstants.SCAN_DEFAULT_FPS=2,Html5QrcodeConstants.DEFAULT_DISABLE_FLIP=!1,Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE=[p.SCAN_TYPE_CAMERA,p.SCAN_TYPE_FILE],Html5QrcodeConstants}(),C=function(){function QrcodeResultFormat(e,t){this.format=e,this.formatName=t}return QrcodeResultFormat.prototype.toString=function(){return this.formatName},QrcodeResultFormat.create=function(e){if(!S.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new QrcodeResultFormat(e,S.get(e))},QrcodeResultFormat}(),T=function(){function Html5QrcodeResultFactory(){}return Html5QrcodeResultFactory.createFromText=function(e){return{decodedText:e,result:{text:e}}},Html5QrcodeResultFactory.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},Html5QrcodeResultFactory}();(a=f||(f={}))[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR";var M=function(){function Html5QrcodeErrorFactory(){}return Html5QrcodeErrorFactory.createFrom=function(e){return{errorMessage:e,type:f.UNKWOWN_ERROR}},Html5QrcodeErrorFactory}(),I=function(){function BaseLoggger(e){this.verbose=e}return BaseLoggger.prototype.log=function(e){this.verbose&&console.log(e)},BaseLoggger.prototype.warn=function(e){this.verbose&&console.warn(e)},BaseLoggger.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},BaseLoggger.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},BaseLoggger}();function isNullOrUndefined(e){return null==e}var E=function(){function Html5QrcodeStrings(){}return Html5QrcodeStrings.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},Html5QrcodeStrings.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},Html5QrcodeStrings.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},Html5QrcodeStrings.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},Html5QrcodeStrings.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},Html5QrcodeStrings.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},Html5QrcodeStrings.scannerPaused=function(){return"Scanner paused"},Html5QrcodeStrings}(),A=function(){function Html5QrcodeScannerStrings(){}return Html5QrcodeScannerStrings.scanningStatus=function(){return"Scanning"},Html5QrcodeScannerStrings.idleStatus=function(){return"Idle"},Html5QrcodeScannerStrings.errorStatus=function(){return"Error"},Html5QrcodeScannerStrings.permissionStatus=function(){return"Permission"},Html5QrcodeScannerStrings.noCameraFoundErrorStatus=function(){return"No Cameras"},Html5QrcodeScannerStrings.lastMatch=function(e){return"Last Match: ".concat(e)},Html5QrcodeScannerStrings.codeScannerTitle=function(){return"Code Scanner"},Html5QrcodeScannerStrings.cameraPermissionTitle=function(){return"Request Camera Permissions"},Html5QrcodeScannerStrings.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},Html5QrcodeScannerStrings.noCameraFound=function(){return"No camera found"},Html5QrcodeScannerStrings.scanButtonStopScanningText=function(){return"Stop Scanning"},Html5QrcodeScannerStrings.scanButtonStartScanningText=function(){return"Start Scanning"},Html5QrcodeScannerStrings.torchOnButton=function(){return"Switch On Torch"},Html5QrcodeScannerStrings.torchOffButton=function(){return"Switch Off Torch"},Html5QrcodeScannerStrings.torchOnFailedMessage=function(){return"Failed to turn on torch"},Html5QrcodeScannerStrings.torchOffFailedMessage=function(){return"Failed to turn off torch"},Html5QrcodeScannerStrings.scanButtonScanningStarting=function(){return"Launching Camera..."},Html5QrcodeScannerStrings.textIfCameraScanSelected=function(){return"Scan an Image File"},Html5QrcodeScannerStrings.textIfFileScanSelected=function(){return"Scan using camera directly"},Html5QrcodeScannerStrings.selectCamera=function(){return"Select Camera"},Html5QrcodeScannerStrings.fileSelectionChooseImage=function(){return"Choose Image"},Html5QrcodeScannerStrings.fileSelectionChooseAnother=function(){return"Choose Another"},Html5QrcodeScannerStrings.fileSelectionNoImageSelected=function(){return"No image choosen"},Html5QrcodeScannerStrings.anonymousCameraPrefix=function(){return"Anonymous Camera"},Html5QrcodeScannerStrings.dragAndDropMessage=function(){return"Or drop an image to scan"},Html5QrcodeScannerStrings.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},Html5QrcodeScannerStrings.zoom=function(){return"zoom"},Html5QrcodeScannerStrings.loadingImage=function(){return"Loading image..."},Html5QrcodeScannerStrings.cameraScanAltText=function(){return"Camera based scan"},Html5QrcodeScannerStrings.fileScanAltText=function(){return"Fule based scan"},Html5QrcodeScannerStrings}(),D=function(){function LibraryInfoStrings(){}return LibraryInfoStrings.poweredBy=function(){return"Powered by "},LibraryInfoStrings.reportIssues=function(){return"Report issues"},LibraryInfoStrings}(),v=function(){function VideoConstraintsUtil(){}return VideoConstraintsUtil.isMediaStreamConstraintsValid=function(e,t){if("object"!=typeof e){var n=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var r=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),o=Object.keys(e),a=0;a<o.length;a++){var i=o[a];if(r.has(i))return t.logError("".concat(i," is not supported videoConstaints."),!0),!1}return!0},VideoConstraintsUtil}(),b=n(16817),N=function(){function ZXingHtml5QrcodeDecoder(e,t,n){if(this.formatMap=new Map([[d.QR_CODE,b.BarcodeFormat.QR_CODE],[d.AZTEC,b.BarcodeFormat.AZTEC],[d.CODABAR,b.BarcodeFormat.CODABAR],[d.CODE_39,b.BarcodeFormat.CODE_39],[d.CODE_93,b.BarcodeFormat.CODE_93],[d.CODE_128,b.BarcodeFormat.CODE_128],[d.DATA_MATRIX,b.BarcodeFormat.DATA_MATRIX],[d.MAXICODE,b.BarcodeFormat.MAXICODE],[d.ITF,b.BarcodeFormat.ITF],[d.EAN_13,b.BarcodeFormat.EAN_13],[d.EAN_8,b.BarcodeFormat.EAN_8],[d.PDF_417,b.BarcodeFormat.PDF_417],[d.RSS_14,b.BarcodeFormat.RSS_14],[d.RSS_EXPANDED,b.BarcodeFormat.RSS_EXPANDED],[d.UPC_A,b.BarcodeFormat.UPC_A],[d.UPC_E,b.BarcodeFormat.UPC_E],[d.UPC_EAN_EXTENSION,b.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!b)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=n;var r=this.createZXingFormats(e),o=new Map;o.set(b.DecodeHintType.POSSIBLE_FORMATS,r),o.set(b.DecodeHintType.TRY_HARDER,!1),this.hints=o}return ZXingHtml5QrcodeDecoder.prototype.decodeAsync=function(e){var t=this;return new Promise(function(n,r){try{n(t.decode(e))}catch(e){r(e)}})},ZXingHtml5QrcodeDecoder.prototype.decode=function(e){var t=new b.MultiFormatReader(this.verbose,this.hints),n=new b.HTMLCanvasElementLuminanceSource(e),r=new b.BinaryBitmap(new b.HybridBinarizer(n)),o=t.decode(r);return{text:o.text,format:C.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},ZXingHtml5QrcodeDecoder.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},ZXingHtml5QrcodeDecoder.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},ZXingHtml5QrcodeDecoder.prototype.createZXingFormats=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];this.formatMap.has(r)?t.push(this.formatMap.get(r)):this.logger.logError("".concat(r," is not supported by")+"ZXingHtml5QrcodeShim")}return t},ZXingHtml5QrcodeDecoder.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},ZXingHtml5QrcodeDecoder}(),__generator=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},w=function(){function BarcodeDetectorDelegate(e,t,n){if(this.formatMap=new Map([[d.QR_CODE,"qr_code"],[d.AZTEC,"aztec"],[d.CODABAR,"codabar"],[d.CODE_39,"code_39"],[d.CODE_93,"code_93"],[d.CODE_128,"code_128"],[d.DATA_MATRIX,"data_matrix"],[d.ITF,"itf"],[d.EAN_13,"ean_13"],[d.EAN_8,"ean_8"],[d.PDF_417,"pdf417"],[d.UPC_A,"upc_a"],[d.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!BarcodeDetectorDelegate.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=t,this.logger=n;var r=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(r),!this.detector)throw"BarcodeDetector detector not supported"}return BarcodeDetectorDelegate.isSupported=function(){return"BarcodeDetector"in window&&(new BarcodeDetector({formats:["qr_code"]}),!0)},BarcodeDetectorDelegate.prototype.decodeAsync=function(e){var t,n,r,o;return t=this,n=void 0,r=void 0,o=function(){var t,n;return __generator(this,function(r){switch(r.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=r.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(t)).rawValue,format:C.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})},new(r||(r=Promise))(function(e,a){function fulfilled(e){try{step(o.next(e))}catch(e){a(e)}}function rejected(e){try{step(o.throw(e))}catch(e){a(e)}}function step(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(fulfilled,rejected)}step((o=o.apply(t,n||[])).next())})},BarcodeDetectorDelegate.prototype.selectLargestBarcode=function(e){for(var t=null,n=0,r=0;r<e.length;r++){var o=e[r],a=o.boundingBox.width*o.boundingBox.height;a>n&&(n=a,t=o)}if(!t)throw"No largest barcode found";return t},BarcodeDetectorDelegate.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];this.formatMap.has(r)?t.push(this.formatMap.get(r)):this.logger.warn("".concat(r," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},BarcodeDetectorDelegate.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},BarcodeDetectorDelegate.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(t,n,r){e.set(t,n)}),e},BarcodeDetectorDelegate.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},BarcodeDetectorDelegate}(),code_decoder_awaiter=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function fulfilled(e){try{step(r.next(e))}catch(e){a(e)}}function rejected(e){try{step(r.throw(e))}catch(e){a(e)}}function step(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})},code_decoder_generator=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},L=function(){function Html5QrcodeShim(e,t,n,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,t&&w.isSupported()?(this.primaryDecoder=new w(e,n,r),this.secondaryDecoder=new N(e,n,r)):this.primaryDecoder=new N(e,n,r)}return Html5QrcodeShim.prototype.decodeAsync=function(e){return code_decoder_awaiter(this,void 0,void 0,function(){var t;return code_decoder_generator(this,function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}})})},Html5QrcodeShim.prototype.decodeRobustlyAsync=function(e){return code_decoder_awaiter(this,void 0,void 0,function(){var t,n;return code_decoder_generator(this,function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,r.sent()];case 3:if(n=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw n;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}})})},Html5QrcodeShim.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},Html5QrcodeShim.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},Html5QrcodeShim.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,n=this.executionResults;t<n.length;t++)e+=n[t];var r=e/this.executionResults.length;console.log("".concat(r," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},Html5QrcodeShim}(),_=(i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),core_impl_awaiter=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function fulfilled(e){try{step(r.next(e))}catch(e){a(e)}}function rejected(e){try{step(r.throw(e))}catch(e){a(e)}}function step(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})},core_impl_generator=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},O=function(){function AbstractCameraCapability(e,t){this.name=e,this.track=t}return AbstractCameraCapability.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},AbstractCameraCapability.prototype.apply=function(e){var t={};return t[this.name]=e,this.track.applyConstraints({advanced:[t]})},AbstractCameraCapability.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},AbstractCameraCapability}(),x=function(e){function ZoomFeatureImpl(t){return e.call(this,"zoom",t)||this}return _(ZoomFeatureImpl,e),ZoomFeatureImpl}(function(e){function AbstractRangeCameraCapability(t,n){return e.call(this,t,n)||this}return _(AbstractRangeCameraCapability,e),AbstractRangeCameraCapability.prototype.min=function(){return this.getCapabilities().min},AbstractRangeCameraCapability.prototype.max=function(){return this.getCapabilities().max},AbstractRangeCameraCapability.prototype.step=function(){return this.getCapabilities().step},AbstractRangeCameraCapability.prototype.apply=function(e){var t={};return t[this.name]=e,this.track.applyConstraints({advanced:[t]})},AbstractRangeCameraCapability.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},AbstractRangeCameraCapability.prototype.failIfNotSupported=function(){if(!this.isSupported())throw Error("".concat(this.name," capability not supported"))},AbstractRangeCameraCapability}(O)),U=function(e){function TorchFeatureImpl(t){return e.call(this,"torch",t)||this}return _(TorchFeatureImpl,e),TorchFeatureImpl}(O),R=function(){function CameraCapabilitiesImpl(e){this.track=e}return CameraCapabilitiesImpl.prototype.zoomFeature=function(){return new x(this.track)},CameraCapabilitiesImpl.prototype.torchFeature=function(){return new U(this.track)},CameraCapabilitiesImpl}(),j=function(){function RenderedCameraImpl(e,t,n){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return RenderedCameraImpl.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},RenderedCameraImpl.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var onVideoStart=function(){var t=e.surface.clientWidth,n=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(t,n),e.surface.removeEventListener("playing",onVideoStart)};this.surface.addEventListener("playing",onVideoStart),this.surface.srcObject=this.mediaStream,this.surface.play()},RenderedCameraImpl.create=function(e,t,n,r){return core_impl_awaiter(this,void 0,void 0,function(){var o,a;return core_impl_generator(this,function(i){switch(i.label){case 0:if(o=new RenderedCameraImpl(e,t,r),!n.aspectRatio)return[3,2];return a={aspectRatio:n.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(a)];case 1:i.sent(),i.label=2;case 2:return o.setupSurface(),[2,o]}})})},RenderedCameraImpl.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},RenderedCameraImpl.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},RenderedCameraImpl.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},RenderedCameraImpl.prototype.resume=function(e){this.failIfClosed();var t=this,onVideoResume=function(){setTimeout(e,200),t.surface.removeEventListener("playing",onVideoResume)};this.surface.addEventListener("playing",onVideoResume),this.surface.play()},RenderedCameraImpl.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},RenderedCameraImpl.prototype.getSurface=function(){return this.failIfClosed(),this.surface},RenderedCameraImpl.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},RenderedCameraImpl.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},RenderedCameraImpl.prototype.applyVideoConstraints=function(e){return core_impl_awaiter(this,void 0,void 0,function(){return core_impl_generator(this,function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},RenderedCameraImpl.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(t,n){var r=e.mediaStream.getVideoTracks().length,o=0;e.mediaStream.getVideoTracks().forEach(function(n){e.mediaStream.removeTrack(n),n.stop(),++o>=r&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())})})},RenderedCameraImpl.prototype.getCapabilities=function(){return new R(this.getFirstTrackOrFail())},RenderedCameraImpl}(),Q=function(){function CameraImpl(e){this.mediaStream=e}return CameraImpl.prototype.render=function(e,t,n){return core_impl_awaiter(this,void 0,void 0,function(){return core_impl_generator(this,function(r){return[2,j.create(e,this.mediaStream,t,n)]})})},CameraImpl.create=function(e){return core_impl_awaiter(this,void 0,void 0,function(){var t,n;return core_impl_generator(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return t={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(t)];case 1:return n=r.sent(),[2,new CameraImpl(n)]}})})},CameraImpl}(),factories_awaiter=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function fulfilled(e){try{step(r.next(e))}catch(e){a(e)}}function rejected(e){try{step(r.throw(e))}catch(e){a(e)}}function step(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})},factories_generator=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},H=function(){function CameraFactory(){}return CameraFactory.failIfNotSupported=function(){return factories_awaiter(this,void 0,void 0,function(){return factories_generator(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new CameraFactory]})})},CameraFactory.prototype.create=function(e){return factories_awaiter(this,void 0,void 0,function(){return factories_generator(this,function(t){return[2,Q.create(e)]})})},CameraFactory}(),retriever_generator=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},F=function(){function CameraRetriever(){}return CameraRetriever.retrieve=function(){if(navigator.mediaDevices)return CameraRetriever.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?CameraRetriever.getCamerasFromMediaStreamTrack():CameraRetriever.rejectWithError()},CameraRetriever.rejectWithError=function(){var e=E.unableToQuerySupportedDevices();return CameraRetriever.isHttpsOrLocalhost()||(e=E.insecureContextCameraQueryError()),Promise.reject(e)},CameraRetriever.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},CameraRetriever.getCamerasFromMediaDevices=function(){var e,t,n,r;return e=this,t=void 0,n=void 0,r=function(){var e,t,n,r,o,a,i;return retriever_generator(this,function(s){switch(s.label){case 0:return e=function(e){for(var t=e.getVideoTracks(),n=0;n<t.length;n++){var r=t[n];r.enabled=!1,r.stop(),e.removeTrack(r)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=s.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=0,n=s.sent(),r=[],a=n;o<a.length;o++)"videoinput"===(i=a[o]).kind&&r.push({id:i.deviceId,label:i.label});return e(t),[2,r]}})},new(n||(n=Promise))(function(o,a){function fulfilled(e){try{step(r.next(e))}catch(e){a(e)}}function rejected(e){try{step(r.throw(e))}catch(e){a(e)}}function step(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})},CameraRetriever.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,t){MediaStreamTrack.getSources(function(t){for(var n=[],r=0;r<t.length;r++){var o=t[r];"video"===o.kind&&n.push({id:o.id,label:o.label})}e(n)})})},CameraRetriever}();(s=m||(m={}))[s.UNKNOWN=0]="UNKNOWN",s[s.NOT_STARTED=1]="NOT_STARTED",s[s.SCANNING=2]="SCANNING",s[s.PAUSED=3]="PAUSED";var B=function(){function StateManagerImpl(){this.state=m.NOT_STARTED,this.onGoingTransactionNewState=m.UNKNOWN}return StateManagerImpl.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},StateManagerImpl.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},StateManagerImpl.prototype.execute=function(){if(this.onGoingTransactionNewState===m.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=m.UNKNOWN,this.directTransition(e)},StateManagerImpl.prototype.cancel=function(){if(this.onGoingTransactionNewState===m.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=m.UNKNOWN},StateManagerImpl.prototype.getState=function(){return this.state},StateManagerImpl.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==m.UNKNOWN)throw"Cannot transition to a new state, already under transition"},StateManagerImpl.prototype.validateTransition=function(e){switch(this.state){case m.UNKNOWN:throw"Transition from unknown is not allowed";case m.NOT_STARTED:this.failIfNewStateIs(e,[m.PAUSED]);case m.SCANNING:case m.PAUSED:}},StateManagerImpl.prototype.failIfNewStateIs=function(e,t){for(var n=0;n<t.length;n++)if(e===t[n])throw"Cannot transition from ".concat(this.state," to ").concat(e)},StateManagerImpl}(),P=function(){function StateManagerProxy(e){this.stateManager=e}return StateManagerProxy.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},StateManagerProxy.prototype.directTransition=function(e){this.stateManager.directTransition(e)},StateManagerProxy.prototype.getState=function(){return this.stateManager.getState()},StateManagerProxy.prototype.canScanFile=function(){return this.stateManager.getState()===m.NOT_STARTED},StateManagerProxy.prototype.isScanning=function(){return this.stateManager.getState()!==m.NOT_STARTED},StateManagerProxy.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===m.SCANNING},StateManagerProxy.prototype.isPaused=function(){return this.stateManager.getState()===m.PAUSED},StateManagerProxy}(),z=function(){function StateManagerFactory(){}return StateManagerFactory.create=function(){return new P(new B)},StateManagerFactory}(),k=(c=function(e,t){return(c=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}c(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),Y=function(e){function Constants(){return null!==e&&e.apply(this,arguments)||this}return k(Constants,e),Constants.DEFAULT_WIDTH=300,Constants.DEFAULT_WIDTH_OFFSET=2,Constants.FILE_SCAN_MIN_HEIGHT=300,Constants.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,Constants.MIN_QR_BOX_SIZE=50,Constants.SHADED_LEFT=1,Constants.SHADED_RIGHT=2,Constants.SHADED_TOP=3,Constants.SHADED_BOTTOM=4,Constants.SHADED_REGION_ELEMENT_ID="qr-shaded-region",Constants.VERBOSE=!1,Constants.BORDER_SHADER_DEFAULT_COLOR="#ffffff",Constants.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",Constants}(y),V=function(){function InternalHtml5QrcodeConfig(e,t){this.logger=t,this.fps=Y.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Y.DEFAULT_DISABLE_FLIP}return InternalHtml5QrcodeConfig.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?v.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},InternalHtml5QrcodeConfig.prototype.isShadedBoxEnabled=function(){return!isNullOrUndefined(this.qrbox)},InternalHtml5QrcodeConfig.create=function(e,t){return new InternalHtml5QrcodeConfig(e,t)},InternalHtml5QrcodeConfig}(),Z=function(){function Html5Qrcode(e,t){var n;if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(n=t,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new I(this.verbose),this.qrcode=new L(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=z.create()}return Html5Qrcode.prototype.start=function(e,t,n,r){var o,a=this;if(!e)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";o=r||(this.verbose?this.logger.log:function(){});var i=V.create(t,this.logger);this.clearElement();var s=!1;i.videoConstraints&&(i.isMediaStreamConstraintsValid()?s=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var c=s,l=document.getElementById(this.elementId);l.clientWidth?l.clientWidth:Y.DEFAULT_WIDTH,l.style.position="relative",this.shouldScan=!0,this.element=l;var u=this,d=this.stateManagerProxy.startTransition(m.SCANNING);return new Promise(function(t,r){var s=c?i.videoConstraints:u.createVideoConstraints(e);if(!s){d.cancel(),r("videoConstraints should be defined");return}var l={};(!c||i.aspectRatio)&&(l.aspectRatio=i.aspectRatio);var h={onRenderSurfaceReady:function(e,t){u.setupUi(e,t,i),u.isScanning=!0,u.foreverScan(i,n,o)}};H.failIfNotSupported().then(function(e){e.create(s).then(function(e){return e.render(a.element,l,h).then(function(e){u.renderedCamera=e,d.execute(),t(null)}).catch(function(e){d.cancel(),r(e)})}).catch(function(e){d.cancel(),r(E.errorGettingUserMedia(e))})}).catch(function(e){d.cancel(),r(E.cameraStreamingNotSupported())})})},Html5Qrcode.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(m.PAUSED),this.showPausedState(),(isNullOrUndefined(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},Html5Qrcode.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,transitionToScanning=function(){e.stateManagerProxy.directTransition(m.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){transitionToScanning();return}this.renderedCamera.resume(function(){transitionToScanning()})},Html5Qrcode.prototype.getState=function(){return this.stateManagerProxy.getState()},Html5Qrcode.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(m.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var removeQrRegion=function(){if(e.element){var t=document.getElementById(Y.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}},n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),removeQrRegion(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),t.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},Html5Qrcode.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then(function(e){return e.decodedText})},Html5Qrcode.prototype.scanFileV2=function(e,t){var n=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(isNullOrUndefined(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(r,o){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(e);var a=new Image;a.onload=function(){var e=a.width,i=a.height,s=document.getElementById(n.elementId),c=s.clientWidth?s.clientWidth:Y.DEFAULT_WIDTH,l=Math.max(s.clientHeight?s.clientHeight:i,Y.FILE_SCAN_MIN_HEIGHT),u=n.computeCanvasDrawConfig(e,i,c,l);if(t){var d=n.createCanvasElement(c,l,"qr-canvas-visible");d.style.display="inline-block",s.appendChild(d);var h=d.getContext("2d");if(!h)throw"Unable to get 2d context from canvas";h.canvas.width=c,h.canvas.height=l,h.drawImage(a,0,0,e,i,u.x,u.y,u.width,u.height)}var p=Y.FILE_SCAN_HIDDEN_CANVAS_PADDING,f=Math.max(a.width,u.width),m=Math.max(a.height,u.height),g=f+2*p,S=m+2*p,y=n.createCanvasElement(g,S);s.appendChild(y);var C=y.getContext("2d");if(!C)throw"Unable to get 2d context from canvas";C.canvas.width=g,C.canvas.height=S,C.drawImage(a,0,0,e,i,p,p,f,m);try{n.qrcode.decodeRobustlyAsync(y).then(function(e){r(T.createFromQrcodeResult(e))}).catch(o)}catch(e){o("QR code parse error, error = ".concat(e))}},a.onerror=o,a.onabort=o,a.onstalled=o,a.onsuspend=o,a.src=URL.createObjectURL(e)})},Html5Qrcode.prototype.clear=function(){this.clearElement()},Html5Qrcode.getCameras=function(){return F.retrieve()},Html5Qrcode.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},Html5Qrcode.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},Html5Qrcode.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},Html5Qrcode.prototype.applyVideoConstraints=function(e){if(e){if(!v.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},Html5Qrcode.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},Html5Qrcode.prototype.getSupportedFormats=function(e){var t=[d.QR_CODE,d.AZTEC,d.CODABAR,d.CODE_39,d.CODE_93,d.CODE_128,d.DATA_MATRIX,d.MAXICODE,d.ITF,d.EAN_13,d.EAN_8,d.PDF_417,d.RSS_14,d.RSS_EXPANDED,d.UPC_A,d.UPC_E,d.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e||!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,o=e.formatsToSupport;r<o.length;r++){var a=o[r];Object.values(d).includes(a)?n.push(a):this.logger.warn("Invalid format: ".concat(a," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},Html5Qrcode.prototype.getUseBarCodeDetectorIfSupported=function(e){if(isNullOrUndefined(e))return!0;if(!isNullOrUndefined(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(isNullOrUndefined(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!isNullOrUndefined(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},Html5Qrcode.prototype.validateQrboxSize=function(e,t,n){var r,o=n.qrbox;this.validateQrboxConfig(o);var a=this.toQrdimensions(e,t,o),validateMinSize=function(e){if(e<Y.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Y.MIN_QR_BOX_SIZE,"px.")};validateMinSize(a.width),validateMinSize(a.height),a.width=((r=a.width)>e&&(this.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),r=e),r)},Html5Qrcode.prototype.validateQrboxConfig=function(e){if("number"!=typeof e&&"function"!=typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},Html5Qrcode.prototype.toQrdimensions=function(e,t,n){if("number"==typeof n)return{width:n,height:n};if("function"==typeof n)try{return n(e,t)}catch(e){throw Error("qrbox config was passed as a function but it failed with unknown error"+e)}return n},Html5Qrcode.prototype.setupUi=function(e,t,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,n);var r=isNullOrUndefined(n.qrbox)?{width:e,height:t}:n.qrbox;this.validateQrboxConfig(r);var o=this.toQrdimensions(e,t,r);o.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var a=n.isShadedBoxEnabled()&&o.height<=t,i=a?this.getShadedRegionBounds(e,t,o):{x:0,y:0,width:e,height:t},s=this.createCanvasElement(i.width,i.height),c=s.getContext("2d",{willReadFrequently:!0});c.canvas.width=i.width,c.canvas.height=i.height,this.element.append(s),a&&this.possiblyInsertShadingElement(this.element,e,t,o),this.createScannerPausedUiElement(this.element),this.qrRegion=i,this.context=c,this.canvasElement=s},Html5Qrcode.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=E.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},Html5Qrcode.prototype.scanContext=function(e,t){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(t){return e(t.text,T.createFromQrcodeResult(t)),n.possiblyUpdateShaders(!0),!0}).catch(function(e){n.possiblyUpdateShaders(!1);var r=E.codeParseError(e);return t(r,M.createFrom(r)),!1})},Html5Qrcode.prototype.foreverScan=function(e,t,n){var r=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),a=o.videoWidth/o.clientWidth,i=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var s=this.qrRegion.width*a,c=this.qrRegion.height*i,l=this.qrRegion.x*a,u=this.qrRegion.y*i;this.context.drawImage(o,l,u,s,c,0,0,this.qrRegion.width,this.qrRegion.height);var triggerNextScan=function(){r.foreverScanTimeout=setTimeout(function(){r.foreverScan(e,t,n)},r.getTimeoutFps(e.fps))};this.scanContext(t,n).then(function(o){o||!0===e.disableFlip?triggerNextScan():(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(t,n).finally(function(){triggerNextScan()}))}).catch(function(e){r.logger.logError("Error happend while scanning context",e),triggerNextScan()})}},Html5Qrcode.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",n="deviceId",r={user:!0,environment:!0},o="exact",isValidFacingModeValue=function(e){if(e in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},a=Object.keys(e);if(1!==a.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(a.length," keys");var i=Object.keys(e)[0];if(i!==t&&i!==n)throw"Only '".concat(t,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(i===t){var s=e.facingMode;if("string"==typeof s){if(isValidFacingModeValue(s))return{facingMode:s}}else if("object"==typeof s){if(o in s){if(isValidFacingModeValue(s["".concat(o)]))return{facingMode:{exact:s["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.")}else{var c=typeof s;throw"Invalid type of 'facingMode' = ".concat(c)}}else{var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(o in l)return{deviceId:{exact:l["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof l)}}var u=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(u)},Html5Qrcode.prototype.computeCanvasDrawConfig=function(e,t,n,r){if(e<=n&&t<=r)return{x:(n-e)/2,y:(r-t)/2,width:e,height:t};var o=e,a=t;return e>n&&(t=n/e*t,e=n),t>r&&(e=r/t*e,t=r),this.logger.log("Image downsampled from "+"".concat(o,"X").concat(a)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,n,r)},Html5Qrcode.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},Html5Qrcode.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(t){t.style.backgroundColor=e?Y.BORDER_SHADER_MATCH_COLOR:Y.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},Html5Qrcode.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},Html5Qrcode.prototype.createCanvasElement=function(e,t,n){var r=document.createElement("canvas");return r.style.width="".concat(e,"px"),r.style.height="".concat(t,"px"),r.style.display="none",r.id=isNullOrUndefined(n)?"qr-canvas":n,r},Html5Qrcode.prototype.getShadedRegionBounds=function(e,t,n){if(n.width>e||n.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-n.width)/2,y:(t-n.height)/2,width:n.width,height:n.height}},Html5Qrcode.prototype.possiblyInsertShadingElement=function(e,t,n,r){if(!(t-r.width<1)&&!(n-r.height<1)){var o=document.createElement("div");o.style.position="absolute";var a=(t-r.width)/2,i=(n-r.height)/2;o.style.borderLeft="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(i,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(i,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(Y.SHADED_REGION_ELEMENT_ID),t-r.width<11||n-r.height<11?this.hasBorderShaders=!1:(this.insertShaderBorders(o,40,5,-5,null,0,!0),this.insertShaderBorders(o,40,5,-5,null,0,!1),this.insertShaderBorders(o,40,5,null,-5,0,!0),this.insertShaderBorders(o,40,5,null,-5,0,!1),this.insertShaderBorders(o,5,45,-5,null,-5,!0),this.insertShaderBorders(o,5,45,null,-5,-5,!0),this.insertShaderBorders(o,5,45,-5,null,-5,!1),this.insertShaderBorders(o,5,45,null,-5,-5,!1),this.hasBorderShaders=!0),e.append(o)}},Html5Qrcode.prototype.insertShaderBorders=function(e,t,n,r,o,a,i){var s=document.createElement("div");s.style.position="absolute",s.style.backgroundColor=Y.BORDER_SHADER_DEFAULT_COLOR,s.style.width="".concat(t,"px"),s.style.height="".concat(n,"px"),null!==r&&(s.style.top="".concat(r,"px")),null!==o&&(s.style.bottom="".concat(o,"px")),i?s.style.left="".concat(a,"px"):s.style.right="".concat(a,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(s),e.appendChild(s)},Html5Qrcode.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},Html5Qrcode.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},Html5Qrcode.prototype.getTimeoutFps=function(e){return 1e3/e},Html5Qrcode}(),q="data:image/svg+xml;base64,",W=q+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",G=q+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",X=q+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",K=function(){function PersistedDataFactory(){}return PersistedDataFactory.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},PersistedDataFactory}(),J=function(){function PersistedDataManager(){this.data=K.createDefault();var e=localStorage.getItem(PersistedDataManager.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return PersistedDataManager.prototype.hasCameraPermissions=function(){return this.data.hasPermission},PersistedDataManager.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},PersistedDataManager.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},PersistedDataManager.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},PersistedDataManager.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},PersistedDataManager.prototype.reset=function(){this.data=K.createDefault(),this.flush()},PersistedDataManager.prototype.flush=function(){localStorage.setItem(PersistedDataManager.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},PersistedDataManager.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",PersistedDataManager}(),$=function(){function LibraryInfoDiv(){this.infoDiv=document.createElement("div")}return LibraryInfoDiv.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=D.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var n=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(r);var o=document.createElement("a");o.innerText=D.reportIssues(),o.href="https://github.com/mebjas/html5-qrcode/issues",o.target="new",o.style.color="white",this.infoDiv.appendChild(o),e.appendChild(this.infoDiv)},LibraryInfoDiv.prototype.show=function(){this.infoDiv.style.display="block"},LibraryInfoDiv.prototype.hide=function(){this.infoDiv.style.display="none"},LibraryInfoDiv}(),ee=function(){function LibraryInfoIcon(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return LibraryInfoIcon.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=X,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},LibraryInfoIcon.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},LibraryInfoIcon.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},LibraryInfoIcon.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=X,this.infoIcon.style.opacity="0.6")},LibraryInfoIcon}(),et=function(){function LibraryInfoContainer(){var e=this;this.infoDiv=new $,this.infoIcon=new ee(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return LibraryInfoContainer.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},LibraryInfoContainer}(),permissions_generator=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},en=function(){function CameraPermissions(){}return CameraPermissions.hasPermissions=function(){var e,t,n,r;return e=this,t=void 0,n=void 0,r=function(){var e,t,n;return permissions_generator(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=0,t=r.sent();e<t.length;e++)if("videoinput"===(n=t[e]).kind&&n.label)return[2,!0];return[2,!1]}})},new(n||(n=Promise))(function(o,a){function fulfilled(e){try{step(r.next(e))}catch(e){a(e)}}function rejected(e){try{step(r.throw(e))}catch(e){a(e)}}function step(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})},CameraPermissions}(),er=function(){function ScanTypeSelector(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return ScanTypeSelector.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},ScanTypeSelector.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},ScanTypeSelector.prototype.isCameraScanRequired=function(){for(var e=0,t=this.supportedScanTypes;e<t.length;e++){var n=t[e];if(ScanTypeSelector.isCameraScanType(n))return!0}return!1},ScanTypeSelector.isCameraScanType=function(e){return e===p.SCAN_TYPE_CAMERA},ScanTypeSelector.isFileScanType=function(e){return e===p.SCAN_TYPE_FILE},ScanTypeSelector.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return y.DEFAULT_SUPPORTED_SCAN_TYPE;var t=y.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var n=0;n<e.length;n++){var r=e[n];if(!y.DEFAULT_SUPPORTED_SCAN_TYPE.includes(r))throw"Unsupported scan type ".concat(r)}return e},ScanTypeSelector}(),eo=function(){function PublicUiElementIdAndClasses(){}return PublicUiElementIdAndClasses.ALL_ELEMENT_CLASS="html5-qrcode-element",PublicUiElementIdAndClasses.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",PublicUiElementIdAndClasses.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",PublicUiElementIdAndClasses.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",PublicUiElementIdAndClasses.TORCH_BUTTON_ID="html5-qrcode-button-torch",PublicUiElementIdAndClasses.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",PublicUiElementIdAndClasses.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",PublicUiElementIdAndClasses.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",PublicUiElementIdAndClasses.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",PublicUiElementIdAndClasses}(),ea=function(){function BaseUiElementFactory(){}return BaseUiElementFactory.createElement=function(e,t){var n=document.createElement(e);return n.id=t,n.classList.add(eo.ALL_ELEMENT_CLASS),"button"===e&&n.setAttribute("type","button"),n},BaseUiElementFactory}(),torch_button_awaiter=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function fulfilled(e){try{step(r.next(e))}catch(e){a(e)}}function rejected(e){try{step(r.throw(e))}catch(e){a(e)}}function step(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})},torch_button_generator=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},ei=function(){function TorchController(e,t,n){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=n}return TorchController.prototype.isTorchEnabled=function(){return this.isTorchOn},TorchController.prototype.flipState=function(){return torch_button_awaiter(this,void 0,void 0,function(){var e,t;return torch_button_generator(this,function(n){switch(n.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=n.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}})})},TorchController.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?A.torchOffButton():A.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},TorchController.prototype.propagateFailure=function(e,t){var n=e?A.torchOnFailedMessage():A.torchOffFailedMessage();t&&(n+="; Error = "+t),this.onTorchActionFailureCallback(n)},TorchController.prototype.reset=function(){this.isTorchOn=!1},TorchController}(),es=function(){function TorchButton(e,t){this.onTorchActionFailureCallback=t,this.torchButton=ea.createElement("button",eo.TORCH_BUTTON_ID),this.torchController=new ei(e,this,t)}return TorchButton.prototype.render=function(e,t){var n=this;this.torchButton.innerText=A.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var r=this;this.torchButton.addEventListener("click",function(e){return torch_button_awaiter(n,void 0,void 0,function(){return torch_button_generator(this,function(e){switch(e.label){case 0:return[4,r.torchController.flipState()];case 1:return e.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(eo.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(eo.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(eo.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(eo.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},TorchButton.prototype.updateTorchCapability=function(e){this.torchController=new ei(e,this,this.onTorchActionFailureCallback)},TorchButton.prototype.getTorchButton=function(){return this.torchButton},TorchButton.prototype.hide=function(){this.torchButton.style.display="none"},TorchButton.prototype.show=function(){this.torchButton.style.display="inline-block"},TorchButton.prototype.disable=function(){this.torchButton.disabled=!0},TorchButton.prototype.enable=function(){this.torchButton.disabled=!1},TorchButton.prototype.setText=function(e){this.torchButton.innerText=e},TorchButton.prototype.reset=function(){this.torchButton.innerText=A.torchOnButton(),this.torchController.reset()},TorchButton.create=function(e,t,n,r){var o=new TorchButton(t,r);return o.render(e,n),o},TorchButton}(),ec=function(){function FileSelectionUi(e,t,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=ea.createElement("button",eo.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(e){r.click()}),r.append(this.fileSelectionButton),this.fileScanInput=ea.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var o=this;this.fileScanInput.addEventListener("change",function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var r=t.files[0],a=r.name;o.setImageNameToButton(a),n(r)}}});var a=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(a),this.fileBasedScanRegion.addEventListener("dragenter",function(e){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(e){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(e){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(e){e.stopPropagation(),e.preventDefault(),o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var r=t.files;if(!r||0===r.length)return;for(var i=!1,s=0;s<r.length;++s){var c=r.item(s);if(c){var l=/image.*/;if(c.type.match(l)){i=!0;var u=c.name;o.setImageNameToButton(u),n(c),a.innerText=A.dragAndDropMessage();break}}}i||(a.innerText=A.dragAndDropMessageOnlyImages())}})}return FileSelectionUi.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},FileSelectionUi.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},FileSelectionUi.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},FileSelectionUi.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},FileSelectionUi.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},FileSelectionUi.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},FileSelectionUi.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},FileSelectionUi.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=A.dragAndDropMessage(),e.style.fontWeight="400",e},FileSelectionUi.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),n=e.length,r=e.substring(n-8,n);e="".concat(t,"....").concat(r)}var o=A.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=o},FileSelectionUi.prototype.setInitialValueToButton=function(){var e=A.fileSelectionChooseImage()+" - "+A.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},FileSelectionUi.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},FileSelectionUi.create=function(e,t,n){return new FileSelectionUi(e,t,n)},FileSelectionUi}(),el=function(){function CameraSelectionUi(e){this.selectElement=ea.createElement("select",eo.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return CameraSelectionUi.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw Error("No cameras found");if(1===n)t.style.display="none";else{var r=A.selectCamera();t.innerText="".concat(r," (").concat(this.cameras.length,")  ")}for(var o=1,a=0,i=this.cameras;a<i.length;a++){var s=i[a],c=s.id,l=null==s.label?c:s.label;l&&""!==l||(l=[A.anonymousCameraPrefix(),o++].join(" "));var u=document.createElement("option");u.value=c,u.innerText=l,this.options.push(u),this.selectElement.appendChild(u)}t.appendChild(this.selectElement),e.appendChild(t)},CameraSelectionUi.prototype.disable=function(){this.selectElement.disabled=!0},CameraSelectionUi.prototype.isDisabled=function(){return!0===this.selectElement.disabled},CameraSelectionUi.prototype.enable=function(){this.selectElement.disabled=!1},CameraSelectionUi.prototype.getValue=function(){return this.selectElement.value},CameraSelectionUi.prototype.hasValue=function(e){for(var t=0,n=this.options;t<n.length;t++)if(n[t].value===e)return!0;return!1},CameraSelectionUi.prototype.setValue=function(e){if(!this.hasValue(e))throw Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},CameraSelectionUi.prototype.hasSingleItem=function(){return 1===this.cameras.length},CameraSelectionUi.prototype.numCameras=function(){return this.cameras.length},CameraSelectionUi.create=function(e,t){var n=new CameraSelectionUi(t);return n.render(e),n},CameraSelectionUi}(),eu=function(){function CameraZoomUi(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ea.createElement("input",eo.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return CameraZoomUi.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=A.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",function(){return r.onValueChange()}),this.rangeInput.addEventListener("change",function(){return r.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},CameraZoomUi.prototype.onValueChange=function(){var e=A.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},CameraZoomUi.prototype.setValues=function(e,t,n,r){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},CameraZoomUi.prototype.show=function(){this.zoomElementContainer.style.display="block"},CameraZoomUi.prototype.hide=function(){this.zoomElementContainer.style.display="none"},CameraZoomUi.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},CameraZoomUi.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},CameraZoomUi.create=function(e,t){var n=new CameraZoomUi;return n.render(e,t),n},CameraZoomUi}();(l=g||(g={}))[l.STATUS_DEFAULT=0]="STATUS_DEFAULT",l[l.STATUS_SUCCESS=1]="STATUS_SUCCESS",l[l.STATUS_WARNING=2]="STATUS_WARNING",l[l.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION";var ed=function(){function Html5QrcodeScanner(e,t,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===n,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new er(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new I(this.verbose),this.persistedDataManager=new J,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}return Html5QrcodeScanner.prototype.render=function(e,t){var n,r,o=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,n){if(e)e(t,n);else{if(o.lastMatchFound===t)return;o.lastMatchFound=t,o.setHeaderMessage(A.lastMatch(t),g.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,n){t&&t(e,n)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new Z(this.getScanRegionId(),(n=this.config,r=this.verbose,{formatsToSupport:n.formatsToSupport,useBarCodeDetectorIfSupported:n.useBarCodeDetectorIfSupported,experimentalFeatures:n.experimentalFeatures,verbose:r}))},Html5QrcodeScanner.prototype.pause=function(e){(isNullOrUndefined(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},Html5QrcodeScanner.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},Html5QrcodeScanner.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},Html5QrcodeScanner.prototype.clear=function(){var e=this,emptyHtmlContainer=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise(function(t,n){if(!e.html5Qrcode){t();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(n){if(!e.html5Qrcode){t();return}e.html5Qrcode.clear(),emptyHtmlContainer(),t()}).catch(function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),n(t)}):(e.html5Qrcode.clear(),emptyHtmlContainer(),t())}):Promise.resolve()},Html5QrcodeScanner.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},Html5QrcodeScanner.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},Html5QrcodeScanner.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},Html5QrcodeScanner.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},Html5QrcodeScanner.prototype.createConfig=function(e){return e?(e.fps||(e.fps=y.SCAN_DEFAULT_FPS),!y.DEFAULT_REMEMBER_LAST_CAMERA_USED!==e.rememberLastUsedCamera&&(e.rememberLastUsedCamera=y.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=y.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:y.SCAN_DEFAULT_FPS,rememberLastUsedCamera:y.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:y.DEFAULT_SUPPORTED_SCAN_TYPE}},Html5QrcodeScanner.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),n=this.getScanRegionId();t.id=n,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),er.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),o=this.getDashboardId();r.id=o,r.style.width="100%",e.appendChild(r),this.setupInitialDashboard(r)},Html5QrcodeScanner.prototype.resetBasicLayout=function(e){e.style.border="none"},Html5QrcodeScanner.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},Html5QrcodeScanner.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),new et().renderInto(t);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",t.appendChild(n)},Html5QrcodeScanner.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},Html5QrcodeScanner.prototype.createCameraListUi=function(e,t,n){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(A.cameraPermissionRequesting());var createPermissionButtonIfNotExists=function(){n||r.createPermissionButton(e,t)};Z.getCameras().then(function(n){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),n&&n.length>0?(e.removeChild(t),r.renderCameraSelection(n)):(r.setHeaderMessage(A.noCameraFound(),g.STATUS_WARNING),createPermissionButtonIfNotExists())}).catch(function(e){r.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:createPermissionButtonIfNotExists(),r.setHeaderMessage(e,g.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)})},Html5QrcodeScanner.prototype.createPermissionButton=function(e,t){var n=this,r=ea.createElement("button",this.getCameraPermissionButtonId());r.innerText=A.cameraPermissionTitle(),r.addEventListener("click",function(){r.disabled=!0,n.createCameraListUi(e,t,r)}),t.appendChild(r)},Html5QrcodeScanner.prototype.createPermissionsUi=function(e,t){var n=this;if(er.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){en.hasPermissions().then(function(r){r?n.createCameraListUi(e,t):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t))}).catch(function(r){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(e,t)});return}this.createPermissionButton(e,t)},Html5QrcodeScanner.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=er.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(n);var r=document.createElement("div");r.style.textAlign="center",n.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,r),this.renderFileScanUi(t)},Html5QrcodeScanner.prototype.renderFileScanUi=function(e){var t=er.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=ec.create(e,t,function(e){if(!n.html5Qrcode)throw"html5Qrcode not defined";er.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(A.loadingImage()),n.html5Qrcode.scanFileV2(e,!0).then(function(e){n.resetHeaderMessage(),n.qrCodeSuccessCallback(e.decodedText,e)}).catch(function(e){n.setHeaderMessage(e,g.STATUS_WARNING),n.qrCodeErrorCallback(e,M.createFrom(e))}))})},Html5QrcodeScanner.prototype.renderCameraSelection=function(e){var t,n=this,r=this,o=document.getElementById(this.getDashboardSectionCameraScanRegionId());o.style.textAlign="center";var a=eu.create(o,!1),renderCameraZoomUiIfSupported=function(e){var t,r,o,i=e.zoomFeature();if(i.isSupported()){a.setOnCameraZoomValueChangeCallback(function(e){i.apply(e)});var s=1;n.config.defaultZoomValueIfSupported&&(s=n.config.defaultZoomValueIfSupported),t=s,r=i.min(),s=t>(o=i.max())?o:t<r?r:t,a.setValues(i.min(),i.max(),s,i.step()),a.show()}},i=el.create(o,e),s=document.createElement("span"),c=ea.createElement("button",eo.CAMERA_START_BUTTON_ID);c.innerText=A.scanButtonStartScanningText(),s.appendChild(c);var l=ea.createElement("button",eo.CAMERA_STOP_BUTTON_ID);l.innerText=A.scanButtonStopScanningText(),l.style.display="none",l.disabled=!0,s.appendChild(l);var createAndShowTorchButtonIfSupported=function(e){if(!e.torchFeature().isSupported()){t&&t.hide();return}t?t.updateTorchCapability(e.torchFeature()):t=es.create(s,e.torchFeature(),{display:"none",marginLeft:"5px"},function(e){r.setHeaderMessage(e,g.STATUS_WARNING)}),t.show()};o.appendChild(s);var resetCameraActionStartButton=function(e){e||(c.style.display="none"),c.innerText=A.scanButtonStartScanningText(),c.style.opacity="1",c.disabled=!1,e&&(c.style.display="inline-block")};if(c.addEventListener("click",function(e){c.innerText=A.scanButtonScanningStarting(),i.disable(),c.disabled=!0,c.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var t,o=i.getValue();r.persistedDataManager.setLastUsedCameraId(o),r.html5Qrcode.start(o,{fps:(t=r.config).fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints},r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(e){l.disabled=!1,l.style.display="inline-block",resetCameraActionStartButton(!1);var t=r.html5Qrcode.getRunningTrackCameraCapabilities();!0===n.config.showTorchButtonIfSupported&&createAndShowTorchButtonIfSupported(t),!0===n.config.showZoomSliderIfSupported&&renderCameraZoomUiIfSupported(t)}).catch(function(e){r.showHideScanTypeSwapLink(!0),i.enable(),resetCameraActionStartButton(!0),r.setHeaderMessage(e,g.STATUS_WARNING)})}),i.hasSingleItem()&&c.click(),l.addEventListener("click",function(e){if(!r.html5Qrcode)throw"html5Qrcode not defined";l.disabled=!0,r.html5Qrcode.stop().then(function(e){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),i.enable(),c.disabled=!1,l.style.display="none",c.style.display="inline-block",t&&(t.reset(),t.hide()),a.removeOnCameraZoomValueChangeCallback(),a.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(e){l.disabled=!1,r.setHeaderMessage(e,g.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var u=r.persistedDataManager.getLastUsedCameraId();i.hasValue(u)?(i.setValue(u),c.click()):r.persistedDataManager.resetLastUsedCameraId()}},Html5QrcodeScanner.prototype.createSectionSwap=function(){var e=this,t=A.textIfCameraScanSelected(),n=A.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");o.style.textAlign="center";var a=ea.createElement("span",this.getDashboardSectionSwapLinkId());a.style.textDecoration="underline",a.style.cursor="pointer",a.innerText=er.isCameraScanType(this.currentScanType)?t:n,a.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,er.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),a.innerText=n,e.currentScanType=p.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),a.innerText=t,e.currentScanType=p.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),o.appendChild(a),r.appendChild(o)},Html5QrcodeScanner.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;if(this.persistedDataManager.hasCameraPermissions()){en.hasPermissions().then(function(n){if(n){var r=document.getElementById(t.getCameraPermissionButtonId());if(!r)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else t.persistedDataManager.setHasPermission(!1)}).catch(function(e){t.persistedDataManager.setHasPermission(!1)});return}},Html5QrcodeScanner.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},Html5QrcodeScanner.prototype.setHeaderMessage=function(e,t){t||(t=g.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=e,n.style.display="block",t){case g.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case g.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case g.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},Html5QrcodeScanner.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},Html5QrcodeScanner.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){t.innerHTML="<br>",t.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=W,this.cameraScanImage.alt=A.cameraScanAltText()},Html5QrcodeScanner.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage){t.innerHTML="<br>",t.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(n){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=G,this.fileScanImage.alt=A.fileScanAltText()},Html5QrcodeScanner.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},Html5QrcodeScanner.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},Html5QrcodeScanner.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},Html5QrcodeScanner.prototype.getDashboardSectionSwapLinkId=function(){return eo.SCAN_TYPE_CHANGE_ANCHOR_ID},Html5QrcodeScanner.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},Html5QrcodeScanner.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},Html5QrcodeScanner.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},Html5QrcodeScanner.prototype.getCameraPermissionButtonId=function(){return eo.CAMERA_PERMISSION_BUTTON_ID},Html5QrcodeScanner.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},Html5QrcodeScanner.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},Html5QrcodeScanner.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},Html5QrcodeScanner}()}}]);